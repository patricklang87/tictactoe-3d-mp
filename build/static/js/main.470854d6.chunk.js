(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{48:function(e,t,n){},49:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(15),a=n.n(o),u=n(2),i=(n(48),n(49),n(9)),s=Object(i.b)({name:"game",initialState:{playerOneTurn:null,playerNumber:null,roomName:"",winner:0,gameState:[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],rematchRequested:!1},reducers:{setPlayerNumber:function(e,t){e.playerNumber=t.payload},setPlayerTurn:function(e,t){e.playerOneTurn=t.payload},setRoomName:function(e,t){e.roomName=t.payload},setGameState:function(e,t){var n=t.payload.x,c=t.payload.y,r=t.payload.z,o=e.playerOneTurn?1:2;e.gameState[n][c][r]=o,e.playerOneTurn=!e.playerOneTurn},setWinner:function(e,t){e.winner=t.payload},resetGame:function(e){e.playerOneTurn=null,e.winner=0,e.gameState=[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]]},setRematchRequested:function(e,t){e.rematchRequested=t.payload}}}),l=s.actions,m=l.setPlayerNumber,f=l.setPlayerTurn,j=l.setRoomName,b=l.setGameState,d=l.setWinner,O=l.resetGame,h=l.setRematchRequested,v=s.reducer,g=n(12),p=n(39),y=n.n(p),x=n(1),N=r.a.createContext();function R(){return Object(c.useContext)(N)}function T(e){var t=e.children,n=Object(c.useState)(),r=Object(g.a)(n,2),o=r[0],a=r[1];return Object(c.useEffect)((function(){var e=y()("http://localhost:4000");return a(e),function(){return e.close()}}),[]),Object(x.jsx)(N.Provider,{value:o,children:t})}function C(e){var t=e.positionValues,n=(Object(u.b)(),R()),c=Object(u.c)((function(e){return e.game.playerOneTurn})),r=Object(u.c)((function(e){return e.game.playerNumber})),o=Object(u.c)((function(e){return e.game.roomName})),a=Object(u.c)((function(e){return e.game.winner})),i=t.x,s=t.y,l=t.z,m=Object(u.c)((function(e){return e.game.gameState[i][s][l]})),f="rgba(252, 252, 142, 0.671)";1===m&&(f="hotpink"),2===m&&(f="limegreen");var j=c&&1===r||!c&&2===r;return Object(x.jsx)("div",{className:"Side",onClick:function(){0===m&&0===a&&j&&n.emit("squareClicked",{positionValues:t,roomName:o})},style:{backgroundColor:"".concat(f)}})}function w(e){for(var t=e.positionValues,n=[],c=0;c<6;c++){var r=t.x+t.y+t.z+c;n.push(Object(x.jsx)(C,{positionValues:t},r))}return Object(x.jsx)("div",{className:"Cube",children:n})}n(82);function E(e){for(var t=e.zValue,n=[],c=0;c<3;c++)for(var r=0;r<3;r++){var o=r+c+t,a={x:r,y:c,z:t};n.push(Object(x.jsx)(w,{positionValues:a},o))}return Object(x.jsx)("div",{className:"Sheet",children:n})}function S(){var e=Object(u.c)((function(e){return e.game.playerOneTurn})),t="rgba(252, 252, 142)";0===Object(u.c)((function(e){return e.game.winner}))&&null!=e&&(t=!0===e?"hotpink":"limegreen");for(var n=Object(x.jsx)("div",{className:"indicatorCubeSide",style:{backgroundColor:t}}),c=[],r=0;r<6;r++)c.push(n);return Object(x.jsx)("div",{className:"indicatorCubeDiv",children:Object(x.jsx)("div",{className:"indicatorCubeWrapper",children:Object(x.jsx)("div",{className:"indicatorCube",children:c})})})}n(83);function k(){var e=Object(u.c)((function(e){return e.game.playerOneTurn})),t=Object(u.c)((function(e){return e.game.rematchRequested})),n=Object(u.c)((function(e){return e.game.roomName})),c=Object(u.c)((function(e){return e.game.winner})),r=Object(u.c)((function(e){return e.game.playerNumber})),o=t?"Awaiting Accept Rematch...":"Room Name: ".concat(n,". Awaiting Opponent...");return Object(x.jsxs)("div",{className:"GameInfo",children:[Object(x.jsx)(S,{}),0===c&&(e&&1===r||!e&&2===r)&&Object(x.jsx)("p",{children:"Your Play"}),null==e&&Object(x.jsx)("div",{className:"awaitingOpponent",children:Object(x.jsx)("p",{children:o})})]})}function L(){var e=Object(u.b)(),t=R(),n=Object(u.c)((function(e){return e.game.roomName}));return Object(x.jsx)("button",{onClick:function(){t.emit("requestRematch",n),e(O())},children:"Propose Rematch"})}function G(){var e=Object(u.b)(),t=R(),n=Object(u.c)((function(e){return e.game.roomName}));return Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){t.emit("acceptRematch",n),e(O())},children:"Accept Rematch"})})}n(84);function B(){var e=Object(u.c)((function(e){return e.game.rematchRequested})),t=Object(u.c)((function(e){return e.game.winner}));return Object(x.jsxs)("div",{className:"ResetGame",children:[!e&&Object(x.jsx)(L,{}),e&&0!==t&&Object(x.jsx)(G,{})]})}var M=n(23);n(85);function q(){var e=Object(u.b)(),t=R(),n=Object(u.c)((function(e){return e.game.gameState})),r=Object(u.c)((function(e){return e.game.winner}));Object(c.useEffect)((function(){if(null!=t)return t.on("gameUpdate",(function(t){e(b(t))})),function(){t.off("gameUpdate")}}),[t,e]),Object(c.useEffect)((function(){if(null!=t)return t.on("proposeRematch",(function(){console.log("rematch Requested"),e(h(!0))})),function(){t.off("proposeRematch")}}),[e,t]),Object(c.useEffect)((function(){if(null!=t)return t.on("confirmRematch",(function(t){e(h(!1)),e(f(t)),document.getElementsByTagName("HTML")[0].style.backgroundColor="white"})),function(){return t.off("confirmRematch")}}),[e,t]),Object(c.useEffect)((function(){var t=function(e){var t,n=Object(M.a)(e);try{for(n.s();!(t=n.n()).done;){var c,r=t.value,o=Object(M.a)(r);try{for(o.s();!(c=o.n()).done;){var a=c.value;if(0!==a[0]&&a[0]===a[1]&&a[0]===a[2])return a[0]}}catch(m){o.e(m)}finally{o.f()}if(0!==r[0][0]&&r[0][0]===r[1][1]&&r[0][0]===r[2][2]||0!==r[0][2]&&r[0][2]===r[1][1]&&r[0][2]===r[2][0])return r[1][1];for(var u=0;u<3;u++)if(0!==r[0][u]&&r[0][u]===r[1][u]&&r[0][u]===r[2][u])return r[0][u]}}catch(m){n.e(m)}finally{n.f()}for(var i=0;i<3;i++)for(var s=0;s<3;s++)if(0!==e[0][i][s]&&e[0][i][s]===e[1][i][s]&&e[0][i][s]===e[2][i][s])return e[0][i][s];for(var l=0;l<3;l++){if(0!==e[0][0][l]&&e[0][0][l]===e[1][1][l]&&e[0][0][l]===e[2][2][l]||0!==e[2][0][l]&&e[2][0][l]===e[1][1][l]&&e[2][0][l]===e[0][2][l])return e[1][1][l];if(0!==e[0][l][0]&&e[0][l][0]===e[1][l][1]&&e[0][l][0]===e[2][l][2]||0!==e[2][l][0]&&e[2][l][0]===e[1][l][1]&&e[2][l][0]===e[0][l][2])return e[1][l][1];if(0!==e[0][0][0]&&e[0][0][0]===e[1][1][1]&&e[0][0][0]===e[2][2][2]||0!==e[0][0][2]&&e[0][0][2]===e[1][1][1]&&e[0][0][2]===e[2][2][0]||0!==e[2][0][0]&&e[2][0][0]===e[1][1][1]&&e[2][0][0]===e[0][2][2]||0!==e[2][0][2]&&e[2][0][2]===e[1][1][1]&&e[2][0][0]===e[0][2][0])return e[1][1][1]}}(n);t&&e(d(t))}),[e,n]);for(var o=[],a=0;a<3;a++)o.push(Object(x.jsx)(E,{zValue:a},"sheet"+a));var i=r?"Game winnerRotation":"Game";return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"wrapper",children:Object(x.jsx)("div",{className:i,children:o})}),0===r?Object(x.jsx)(k,{}):Object(x.jsx)(B,{})]})}function P(){var e=Object(u.b)(),t=R();return Object(c.useEffect)((function(){null!=t&&t.on("issueRoomName",(function(n){return e(j(n)),function(){t.off("issueRoomName")}}))}),[t,e]),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){t.emit("newGame"),e(m(1))},children:"Create A New Game"})})}function z(){var e=Object(u.b)(),t=R(),n=Object(c.useState)(""),r=Object(g.a)(n,2),o=r[0],a=r[1],i=Object(c.useState)(""),s=Object(g.a)(i,2),l=s[0],b=s[1];return Object(c.useEffect)((function(){null!=t&&(t.on("confirmJoin",(function(n){var c=n.playerOneTurn,r=n.roomName;return e(f(c)),e(j(r)),b(""),function(){t.off("confirmJoin")}})),t.on("roomFull",(function(e){return b("Room ".concat(e," already has two players.")),function(){t.off("roomFull")}})),t.on("noSuchRoom",(function(e){return b('Room "'.concat(e,'" does not exist.')),function(){t.off("noSuchRoom")}})))}),[t,e]),Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{onChange:function(e){return function(e){a(e.target.value)}(e)},value:o,type:"text",placeholder:"Room Code"}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{onClick:function(){t.emit("joinRoomName",o),e(m(2))},children:"Join A Game"}),""!==l&&Object(x.jsx)("p",{children:l})]})}n(86);function H(){return Object(x.jsxs)("div",{className:"Setup",children:[Object(x.jsx)(S,{}),Object(x.jsxs)("div",{className:"setupOptions",children:[Object(x.jsx)(P,{}),Object(x.jsx)("div",{children:"- OR -"}),Object(x.jsx)(z,{})]})]})}n(87);var F=!1,I=null,V=null,A=0,D=0,Y=!1,J=function(e){var t=e.touches?e.touches[0].clientX:e.clientX,n=e.touches?e.touches[0].clientY:e.clientY;I=t,V=n;var c=X();D=c[0],A=c[1],c[2],F=!0},X=function(){var e,t=0,n=0,c=0;if(document.getElementsByClassName("Game")[0]&&(e=document.getElementsByClassName("Game")[0].style.transform,console.log("ct: ",e)),e){var r=e.split(" ")[0],o=e.split(" ")[1],a=e.split(" ")[2];n=r.slice(8,r.length-4),t=o.slice(8,o.length-4),c=a.slice(8,a.length-4)}return[n,t,c]},W=function(e){var t=e.touches?e.touches[0].clientX:e.clientX,n=e.touches?e.touches[0].clientY:e.clientY;if(document.getElementsByClassName("Game")[0]){var c=document.getElementsByClassName("Game")[0];if(!0===F){var r,o=t-I+Number(D);r=Y?n-V+Number(A):V-n+Number(A);var a="rotateY(".concat(o,"deg) rotateX(").concat(r,"deg) rotateZ(").concat(0,"deg)");c.style.transform=a,console.log(a)}}},Z=function(){F=!1;var e=Math.abs(Number(X()[0])%360);Y=e>90&&e<270};var U=function(){document.getElementsByTagName("HTML")[0].addEventListener("mousedown",J),document.getElementsByTagName("HTML")[0].addEventListener("mousemove",W),document.getElementsByTagName("HTML")[0].addEventListener("mouseup",Z),document.getElementsByTagName("HTML")[0].addEventListener("touchstart",J),document.getElementsByTagName("HTML")[0].addEventListener("touchmove",W),document.getElementsByTagName("HTML")[0].addEventListener("touchend",Z);var e=Object(u.c)((function(e){return e.game.roomName})),t=Object(u.c)((function(e){return e.game.winner}));return Object(c.useEffect)((function(){var e=document.getElementsByTagName("HTML")[0];2===t&&(e.style.backgroundColor="green"),1===t&&(e.style.backgroundColor="hotpink"),0===t&&(e.style.backroundColor="white")}),[t]),Object(x.jsx)("div",{children:""===e?Object(x.jsx)(H,{}):Object(x.jsx)(q,{})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))},Q=Object(i.b)({name:"view",initialState:{rotate:{x:30,y:30},mouseIsDown:!1,zoom:null},reducers:{setRotate:function(e,t){e.rotate={x:t.payload.x,y:t.payload.y}},setZoom:function(e,t){e.zoom=t.payload},setMouseIsDown:function(e,t){e.mouseIsDown=t.payload}}}),$=Q.actions,_=($.setRotate,$.setZoom,$.setMouseIsDown,Q.reducer),ee=Object(i.a)({reducer:{game:v,view:_}});a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(T,{children:Object(x.jsx)(u.a,{store:ee,children:Object(x.jsx)(U,{})})})}),document.getElementById("root")),K()}},[[88,1,2]]]);
//# sourceMappingURL=main.470854d6.chunk.js.map